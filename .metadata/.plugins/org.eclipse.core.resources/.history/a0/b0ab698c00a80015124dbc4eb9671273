package centros_universitarios;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.util.Scanner;
import java.util.TreeMap;

public class Gestion {
	public static void main (String args[]){

		Funcionalidades funcionalidad = new Funcionalidades(); //Composicion de Funcionalidades.
		ComprobacionErrores comprobacion = new ComprobacionErrores(); //Composicion de ComprobacionErrores.

		
		TreeMap <Integer, Profesor> profesores = new TreeMap <Integer, Profesor> ();
		TreeMap <Integer, Alumno> alumnos = new TreeMap<Integer, Alumno> ();
		TreeMap <Integer, Asignatura> asignaturas = new TreeMap<Integer, Asignatura>();
		//cargarFicheroPersonas(); //Se carga el fichero personas.txt.
		profesores=cargarProfesores();
		alumnos=cargarAlumnos();
		asignaturas=cargarAsignaturas();
		
	}

	public static TreeMap<Integer, Profesor> cargarProfesores(){
		FileInputStream flujo_entrada = null;
		try {
			flujo_entrada = new FileInputStream("personas.txt"); // Se crea un flujo de datos al fichero.
		} 
		catch (FileNotFoundException NoExisteFichero) { // Si el fichero no existe, salta excepcion y se muestra mensaje por pantalla.
			System.out.println("Fichero \"personas.txt\" inexistente");
			System.exit(-1); // Mostrar error en el fichero Avisos.txt ----- ???
		}
		Scanner entrada = new Scanner(flujo_entrada); // Se crea un objeto para escanear la linea del fichero
		String linea = null; // Variable que contendra la informacion escaneada del fichero
		while (entrada.hasNextLine()) {
			System.out.println("Entra en el while");
			linea=entrada.nextLine();
			if(linea.contains("profesor")){ //Recogemos los datos del profesor.
				System.out.println("Es un profesor");//------------------
				String dni= entrada.nextLine();
				String nombre = entrada.nextLine();
				String apellidos = entrada.nextLine();
				linea = entrada.nextLine();
				String[] fecha = linea.split("/");
				GregorianCalendar fechaNacimiento = new GregorianCalendar (Integer.parseInt(fecha[2]), Integer.parseInt(fecha[1]), Integer.parseInt(fecha[0]));
				String categoria= entrada.nextLine();
				String departamento= entrada.nextLine();
				Integer horasDocenciaAsignables = Integer.parseInt(entrada.nextLine());
				linea=entrada.nextLine();//CAMBIAR. Recoger docencia impartida del profesor.
				TreeMap<Integer, Grupo> docenciaImpartida = new TreeMap<Integer, Grupo> (); //Recoger docencia impartida del profesor.
				TreeMap<Integer, Asignatura> asignaturasCoordinadas = new TreeMap<Integer, Asignatura> (); //VACIO. No se carga del fichero personas, se carga del fichero asignaturas
				Profesor profesor = new Profesor(dni, nombre, apellidos, fechaNacimiento,categoria, departamento, horasDocenciaAsignables, docenciaImpartida, asignaturasCoordinadas);
			}
			else { //Se salta el bloque del alumno.
				int i;
				for(i=0; i<7 ; i++) linea=entrada.nextLine();
			}
			if(entrada.hasNextLine())
				linea=entrada.nextLine(); //Se recoge el "*" de separacion.
			System.out.println(linea);//-------------
		}
		entrada.close();
		TreeMap<Integer, Profesor> profesores = new TreeMap<Integer, Profesor>();
		return profesores;
	}
	
	public static TreeMap <Integer, Alumno> cargarAlumnos(){
		FileInputStream flujo_entrada = null;
		try {
			flujo_entrada = new FileInputStream("personas.txt"); // Se crea un flujo de datos al fichero.
		} 
		catch (FileNotFoundException NoExisteFichero) { // Si el fichero no existe, salta excepcion y se muestra mensaje por pantalla.
			System.out.println("Fichero \"personas.txt\" inexistente");
			System.exit(-1); // Mostrar error en el fichero Avisos.txt ----- ???
		}
		Scanner entrada = new Scanner(flujo_entrada); // Se crea un objeto para escanear la linea del fichero
		String linea = null; // Variable que contendra la informacion escaneada del fichero
		while (entrada.hasNextLine()) {
			System.out.println("Entra en el while");
			linea=entrada.nextLine();
			if(linea.contains("alumno")){ //Recogemos los datos del alumno.
				System.out.println("Es un alumno"); //-------------
				String dni= entrada.nextLine();
				String nombre = entrada.nextLine();
				String apellidos = entrada.nextLine();
				linea = entrada.nextLine();
				String[] fecha = linea.split("/");
				GregorianCalendar fechaNacimiento = new GregorianCalendar (Integer.parseInt(fecha[2]), Integer.parseInt(fecha[1]), Integer.parseInt(fecha[0]));
				linea = entrada.nextLine();
				fecha = linea.split("/");
				GregorianCalendar fechaIngreso = new GregorianCalendar (Integer.parseInt(fecha[2]), Integer.parseInt(fecha[1]), Integer.parseInt(fecha[0]));
				linea=entrada.nextLine();//CAMBIAR. Recoger asignaturas superadas.
				TreeMap<Integer, NotaFinal> asignaturasAprobadas = new TreeMap<Integer, NotaFinal>(); //Recoger asignaturas superadas.
				linea=entrada.nextLine();//CAMBIAR. Recoger docencia recibida.
				TreeMap<Integer, Grupo> docenciaRecibida = new TreeMap<Integer, Grupo>();//Recoger docencia recibida;
				Alumno alumno = new Alumno (dni, nombre,  apellidos, fechaNacimiento,  fechaIngreso, docenciaRecibida,  asignaturasAprobadas);
			}
			else { //Se salta el bloque del profesor.
				int i;
				for(i=0; i<8 ; i++) linea=entrada.nextLine();
			}
			if(entrada.hasNextLine())
				linea=entrada.nextLine(); //Se recoge el "*" de separacion.
		}
		entrada.close();
		TreeMap<Integer, Alumno> alumnos = new TreeMap<Integer, Alumno>();
		return alumnos;
	}
	
	public static TreeMap<Integer, Asignatura> cargarAsignaturas(){
		TreeMap<Integer, Asignatura> asignaturas = new TreeMap<Integer, Asignatura>();
		return asignaturas;
	}
}


/*public static void cargarFicheroPersonas () {
 * 
FileInputStream flujo_entrada = null;
try {
	flujo_entrada = new FileInputStream("personas.txt"); // Se crea un flujo de datos al fichero.
} 
catch (FileNotFoundException NoExisteFichero) { // Si el fichero no existe, salta excepcion y se muestra mensaje por pantalla.
	System.out.println("Fichero \"personas.txt\" inexistente");
	System.exit(-1); // Mostrar error en el fichero Avisos.txt ----- ???
}
Scanner entrada = new Scanner(flujo_entrada); // Se crea un objeto para escanear la linea del fichero
String linea = null; // Variable que contendra la informacion escaneada del fichero
while (entrada.hasNextLine()) {
	System.out.println("Entra en el while");
	linea=entrada.nextLine();
	if(linea.contains("profesor")){ //Recogemos los datos del profesor.
		System.out.println("Es un profesor");//------------------
		String dni= entrada.nextLine();
		String nombre = entrada.nextLine();
		String apellidos = entrada.nextLine();
		linea = entrada.nextLine();
		String[] fecha = linea.split("/");
		GregorianCalendar fechaNacimiento = new GregorianCalendar (Integer.parseInt(fecha[2]), Integer.parseInt(fecha[1]), Integer.parseInt(fecha[0]));
		String categoria= entrada.nextLine();
		String departamento= entrada.nextLine();
		Integer horasDocenciaAsignables = Integer.parseInt(entrada.nextLine());
		linea=entrada.nextLine();//CAMBIAR. Recoger docencia impartida del profesor.
		TreeMap<Integer, Grupo> docenciaImpartida = new TreeMap<Integer, Grupo> (); //Recoger docencia impartida del profesor.
		TreeMap<Integer, Asignatura> asignaturasCoordinadas = new TreeMap<Integer, Asignatura> (); //VACIO. No se carga del fichero personas, se carga del fichero asignaturas
		Profesor profesor = new Profesor(dni, nombre, apellidos, fechaNacimiento,categoria, departamento, horasDocenciaAsignables, docenciaImpartida, asignaturasCoordinadas);
	}
	else { //Recogemos los datos del alumno.
		System.out.println("Es un alumno"); //-------------
		String dni= entrada.nextLine();
		String nombre = entrada.nextLine();
		String apellidos = entrada.nextLine();
		linea = entrada.nextLine();
		String[] fecha = linea.split("/");
		GregorianCalendar fechaNacimiento = new GregorianCalendar (Integer.parseInt(fecha[2]), Integer.parseInt(fecha[1]), Integer.parseInt(fecha[0]));
		linea = entrada.nextLine();
		fecha = linea.split("/");
		GregorianCalendar fechaIngreso = new GregorianCalendar (Integer.parseInt(fecha[2]), Integer.parseInt(fecha[1]), Integer.parseInt(fecha[0]));
		linea=entrada.nextLine();//CAMBIAR. Recoger asignaturas superadas.
		TreeMap<Integer, NotaFinal> asignaturasAprobadas = new TreeMap<Integer, NotaFinal>(); //Recoger asignaturas superadas.
		linea=entrada.nextLine();//CAMBIAR. Recoger docencia recibida.
		TreeMap<Integer, Grupo> docenciaRecibida = new TreeMap<Integer, Grupo>();//Recoger docencia recibida;
		Alumno alumno = new Alumno (dni, nombre,  apellidos, fechaNacimiento,  fechaIngreso, docenciaRecibida,  asignaturasAprobadas);
	}
	if(entrada.hasNextLine())
		linea=entrada.nextLine(); //Se recoge el "*" de separacion.
	System.out.println(linea);//-------------
}
entrada.close();
}	*/


/*System.out.println(funcionalidad.start()); //Herramienta

Alumno alumno0 = new Alumno("44497152H", "Martin", "Puga Egea", new GregorianCalendar(1995, 01, 24), new GregorianCalendar(2000, 11, 20)); //Herramienta.
Profesor profesor0 = new Profesor("34925064R", "Gisela", "Egea Rodriguez", new GregorianCalendar(1957, 8, 23), "Titular", "Electrónica", 24);
Asignatura asignatura0 = new Asignatura(5, "Cálculo", "CALI", 1);
GregorianCalendar horaGrupo0 = new GregorianCalendar();
horaGrupo0.set(Calendar.HOUR, 11);
horaGrupo0.set(Calendar.MINUTE, 45);
GregorianCalendar horaGrupo00 = new GregorianCalendar();
horaGrupo00.set(Calendar.HOUR, 13);
horaGrupo00.set(Calendar.MINUTE, 50);

Grupo grupo0 = new Grupo ('A',15,'L', horaGrupo0, horaGrupo00);
System.out.println(alumno0.toString()); //Herramienta.
System.out.println(profesor0.toString()); //Herramienta.
System.out.println(asignatura0.toString()); //Herramienta.
System.out.println(grupo0.toString()); //Herramienta.

System.out.println(comprobacion.end()); //Herramienta.
 */
